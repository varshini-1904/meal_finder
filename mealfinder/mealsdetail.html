<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meal Details</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header id="head"></header>
    <div id="heroimage">

    </div>
  <div id="mealDetails"></div>
  <div id="categories">
      <h2>CATEGORIES</h2>
      <div id="carts"></div>
  </div>


  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const mealId = urlParams.get("id");

    fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`)
      .then(response => response.json())
      .then(data => {
        const meal = data.meals[0];
        document.getElementById("mealDetails").innerHTML = `
        <div class="mealsinf">
          <div class=itemheader>
            <p>${meal.strMeal}</p></div>
            <h2>MEAL DETAILS</h2>
            <div class="mealdetails">
              <div class="imgdetails">
                <div class="img">
                  <img src="${meal.strMealThumb}"></div>
                  <div class="inftext">
                    <h4>${meal.strMeal}</h4>
                    <hr>
                    <h5>CATEGORY: <span> ${meal.strCategory}</span></h5>
                    <h5>Source: <span> ${meal.strSource ? meal.strSource : "Source not found"}</span></h5>
                    <p>Tags:</p>
                    <div id="ingredients"></div>
                  </div>
              </div>
              <div id="measure"></div>
              <div id="instructions">


                </div>
            </div>
        </div>
        `
        document.getElementById("ingredients")
        let listitems=""
        for(i=1;i<=20;i++){
          ingredient=meal[`strIngredient${i}`]
          
          if (ingredient && ingredient.trim() !== "") {
    
             listitems +=  `<li>${ingredient}</li>`;

          }
  
        }
        ingredients.innerHTML=`<h3>INGREDIENTS</h3>
                                <ol>${listitems}</ol>`
        
        document.getElementById("measure")
        measure.innerHTML+=`<h3>Measure</h3>`
        for(i=1;i<=20;i++){
          measure=meal[`strMeasure${i}`]
          if (measure && measure.trim() !== "") {
          document.getElementById("measure").innerHTML += 
     
            `<p>${measure}</p>`;
           }
      }
      document.getElementById("instructions");

      instructions.innerHTML = "<h3>Instructions:</h3>";

      let steps = meal.strInstructions.split(/\r?\n/); 
      
      for (let i = 0; i < steps.length; i++) {
  
        let step = steps[i].trim(); 
  
        if (step !== "") {
          instructions.innerHTML+=`<p>${step}</p>`
  
          
  
          ;
  }
}

      

      })
      .catch(error => console.error("Error fetching meal details:", error));
  </script>
  <script src="./script.js"></script>
</body>
</html>
